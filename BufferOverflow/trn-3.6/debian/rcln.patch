Date: Mon, 9 Feb 1998 16:45:06 -0500
Message-Id: <199802092145.QAA01529@kanga.eecs.umich.edu>
From: <steveh@eecs.umich.edu>
Subject: trn: PATCH: fix for "Warning!  Somebody reset <newsgroup>--assuming nothing read."
To: submit@bugs.debian.org
X-Mailer: bug 3.1.0

Package: trn
Version: 3.6-9.1

Received from a colleague of mine, Mike Hucka <hucka@eecs.umich.edu>:

--
Users complain about encountering errors like this from libc6 trn 3.6
on a Debian Linux system (running hamm):

  Warning!  Somebody reset sci.answers--assuming nothing read.
  Checking out your .newsrc -- hang on a second...

  Warning!  Somebody reset comp.ai.genetic--assuming nothing read.

  Warning!  Somebody reset comp.dcom.cell-relay--assuming nothing read.

This happens when they move between newsgroups.  It happens erratically, but
usually in every newsreading session.

An apparent side-effect of this problem for some people is that their .newsrc
file then ends up with entries like

comp.os.linux.misc:
1-213671,,,,,,,,,,,,,,,214204214342214196214158214153214138215158214639214043213961213885213840213719213711213755,214111,214689,214694,214699,2

Here's the patch:

diff -u rcln.c.orig  rcln.c
--- rcln.c.orig Mon Feb  9 04:34:41 1998
+++ rcln.c      Mon Feb  9 04:35:11 1998
@@ -78,7 +78,7 @@
     register char *s, *t, *maxt = Nullch;
     ART_NUM min = 0, max = -1, lastnum = 0;
     char *mbuf;
-    bool morenum;
+    bool_int morenum;

     if (!artnum)
        return 0;

This patch was sent to me by Wayne Ling
<wling@shipwreck.sympatico.ca>, who in turn got it off the net.

"Jan D." <Jan.Djarv@mbox200.swipnet.se>, who reposted the patch on the
net, wrote: "I think the problem was that isdigit returned a number
that didn't fit into a char."


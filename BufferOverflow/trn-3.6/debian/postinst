#! /bin/sh

. /usr/share/debconf/confmodule

case "$1" in
	configure)
		;;
	abort-upgrade|abort-remove|abort-deconfigure)
		exit 0
		;;
esac
umask 022

set -e

update-alternatives --quiet --install \
       /usr/bin/trn trn /usr/lib/trn/trn 36 \
       --slave /usr/share/man/man1/trn.1.gz trn.1.gz \
               /usr/share/man/man1/trn3.1.gz
for x in nntplist trn-artchk; do
       update-alternatives --quiet --install /usr/bin/$x $x /usr/lib/trn/$x 36 \
       --slave /usr/share/man/man1/$x.1.gz $x.1.gz \
       /usr/share/man/man1/trn3-$x.1.gz
done
update-alternatives --quiet --install \
    /usr/bin/rn rn /usr/lib/trn/rn 36
for x in Pnews Rnmail newsetup newsgroups; do
       update-alternatives --quiet --install \
               /usr/bin/$x $x /usr/lib/trn/$x 36 \
               --slave /usr/share/man/man1/$x.1.gz $x.1.gz \
                       /usr/share/man/man1/trn3-$x.1.gz
done

cd /etc

#test for /etc/news/whoami, and create if it's absent
test ! -f news/whoami && touch news/whoami

test -f news/server && exit 0

if ! test -d news
then
	mkdir news
	chown news:news news
	chmod 755 news
fi

db_get shared/news/server
echo "$RET" > news/server
